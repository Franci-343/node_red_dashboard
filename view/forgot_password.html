<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuperar Contraseña</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body[data-theme="dark"] { background:#0f1724; color:#e6eef8; }
        body[data-theme="dark"] .card { background:#0b1220; color:#e6eef8; border-color: rgba(255,255,255,0.04); }
        body[data-theme="dark"] .form-control { background:#07101a; color:#e6eef8; border-color: rgba(255,255,255,0.06); }
        body[data-theme="dark"] .form-control::placeholder { color: rgba(230,238,248,0.5); }
        body[data-theme="dark"] a { color:#9fd3ff; }
        /* Canvas background should not affect layout */
        #bgCanvas { position: fixed; inset: 0; width: 100%; height: 100%; z-index: 0; display:block; pointer-events: none; }
        /* Bring content above the canvas */
        .container { position: relative; z-index: 1; }
        .card { position: relative; z-index: 2; }
    </style>
</head>
<body>
    <canvas id="bgCanvas" aria-hidden="true"></canvas>
    <div class="container d-flex justify-content-center align-items-center vh-100">
        <div class="card p-4" style="width: 100%; max-width: 400px;">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h3 class="mb-0">Recuperar Contraseña</h3>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="themeToggle">
                    <label class="form-check-label small" for="themeToggle">Oscuro</label>
                </div>
            </div>
            <form id="forgotPasswordForm">
                <div class="mb-3">
                    <label for="email" class="form-label">Correo Electrónico</label>
                    <input type="email" class="form-control" id="email" placeholder="Ingresa tu correo" required>
                </div>
                <button type="submit" class="btn btn-primary w-100 mt-3">Enviar Enlace</button>
            </form>
        </div>
    </div>

    <script>
        // Theme handling: apply saved theme and toggle
        (function(){
            const body = document.body;
            const toggle = document.getElementById('themeToggle');
            const saved = localStorage.getItem('theme');
            function applyTheme(t){
                if(t === 'dark') body.setAttribute('data-theme','dark');
                else body.removeAttribute('data-theme');
                if(toggle) toggle.checked = (t === 'dark');
                if (window.updateCanvasTheme) window.updateCanvasTheme(t);
            }
            applyTheme(saved || 'light');
            if(toggle) toggle.addEventListener('change', function(){
                const t = this.checked ? 'dark' : 'light';
                localStorage.setItem('theme', t);
                applyTheme(t);
            });
        })();

        // Animated cubes background (canvas)
        (function(){
            const canvas = document.getElementById('bgCanvas');
            const ctx = canvas.getContext('2d');
            let DPR = window.devicePixelRatio || 1;
            let W = 0, H = 0;
            const N = 28;
            const cubes = [];

            function rand(min, max){ return Math.random()*(max-min)+min; }

            function resize(){
                DPR = window.devicePixelRatio || 1;
                W = window.innerWidth; H = window.innerHeight;
                canvas.width = Math.max(1, Math.floor(W * DPR));
                canvas.height = Math.max(1, Math.floor(H * DPR));
                canvas.style.width = W + 'px';
                canvas.style.height = H + 'px';
                ctx.setTransform(DPR,0,0,DPR,0,0);
            }

            function createCubes(){
                cubes.length = 0;
                for(let i=0;i<N;i++){
                    const size = rand(8,40);
                    cubes.push({
                        x: rand(0,W),
                        y: rand(0,H),
                        vx: rand(-0.3,0.6),
                        vy: rand(-0.1,0.4),
                        r: rand(0,Math.PI*2),
                        vr: rand(-0.002,0.004),
                        s: size,
                        alpha: rand(0.08,0.35)
                    });
                }
            }

            let theme = localStorage.getItem('theme') || 'light';
            let palette = {light: ['rgba(45,120,255,AL)','rgba(85,200,255,AL)','rgba(170,220,255,AL)'], dark: ['rgba(120,200,255,AL)','rgba(90,150,255,AL)','rgba(60,110,200,AL)']};

            window.updateCanvasTheme = function(t){ theme = t || 'light'; };

            function draw(){
                ctx.clearRect(0,0,W,H);
                for(let i=0;i<cubes.length;i++){
                    const c = cubes[i];
                    c.x += c.vx; c.y += c.vy; c.r += c.vr;
                    // wrap
                    if(c.x < -c.s) c.x = W + c.s;
                    if(c.x > W + c.s) c.x = -c.s;
                    if(c.y < -c.s) c.y = H + c.s;
                    if(c.y > H + c.s) c.y = -c.s;

                    const color = palette[theme][i % palette[theme].length].replace('AL', c.alpha);
                    ctx.save();
                    ctx.translate(c.x, c.y);
                    ctx.rotate(c.r);
                    ctx.fillStyle = color;
                    ctx.fillRect(-c.s/2, -c.s/2, c.s, c.s);
                    ctx.globalAlpha = c.alpha * 0.7;
                    ctx.fillRect(-c.s/2 + c.s*0.18, -c.s/2 + c.s*0.12, c.s*0.9, c.s*0.4);
                    ctx.restore();
                }
                requestAnimationFrame(draw);
            }

            function init(){
                resize();
                createCubes();
                draw();
            }

            window.addEventListener('resize', function(){ resize(); });
            init();
        })();

        document.getElementById('forgotPasswordForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const email = document.getElementById('email').value;
            console.log('Correo para recuperación:', email);
            alert('Se ha enviado un enlace de recuperación a tu correo');
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>